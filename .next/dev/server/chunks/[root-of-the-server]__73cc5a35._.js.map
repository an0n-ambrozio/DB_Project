{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/an0n-ambrozio/Documents/an0n-ambrozio/database-design/DB_Project/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///Users/an0n-ambrozio/Documents/an0n-ambrozio/database-design/DB_Project/app/api/auth/login/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\nimport bcrypt from 'bcryptjs';\nimport jwt from 'jsonwebtoken';\nimport { serialize } from 'cookie';\n\nconst SECRET = process.env.JWT_SECRET || 'secret';\n\nexport async function POST(request: Request) {\n    try {\n        const { email, password } = await request.json();\n\n        const user = await prisma.user.findUnique({\n            where: { email }\n        });\n\n        if (!user) {\n            return NextResponse.json({ error: 'Invalid credentials' }, { status: 401 });\n        }\n\n        const isValid = await bcrypt.compare(password, user.password);\n        if (!isValid) {\n            return NextResponse.json({ error: 'Invalid credentials' }, { status: 401 });\n        }\n\n        // Create Token\n        const token = jwt.sign({ userId: user.id, role: user.role }, SECRET, { expiresIn: '1d' });\n\n        // Set Cookie\n        const cookie = serialize('auth_token', token, {\n            httpOnly: true,\n            secure: process.env.NODE_ENV === 'production',\n            maxAge: 60 * 60 * 24, // 1 day\n            path: '/',\n        });\n\n        const response = NextResponse.json({\n            user: { id: user.id, name: user.name, email: user.email, role: user.role }\n        });\n\n        response.headers.set('Set-Cookie', cookie);\n\n        return response;\n    } catch (error) {\n        return NextResponse.json({ error: 'Login failed' }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI;AAElC,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE9C,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACtC,OAAO;gBAAE;YAAM;QACnB;QAEA,IAAI,CAAC,MAAM;YACP,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;QAC5D,IAAI,CAAC,SAAS;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,eAAe;QACf,MAAM,QAAQ,kJAAG,CAAC,IAAI,CAAC;YAAE,QAAQ,KAAK,EAAE;YAAE,MAAM,KAAK,IAAI;QAAC,GAAG,QAAQ;YAAE,WAAW;QAAK;QAEvF,aAAa;QACb,MAAM,SAAS,IAAA,sJAAS,EAAC,cAAc,OAAO;YAC1C,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK;YAClB,MAAM;QACV;QAEA,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;YAC/B,MAAM;gBAAE,IAAI,KAAK,EAAE;gBAAE,MAAM,KAAK,IAAI;gBAAE,OAAO,KAAK,KAAK;gBAAE,MAAM,KAAK,IAAI;YAAC;QAC7E;QAEA,SAAS,OAAO,CAAC,GAAG,CAAC,cAAc;QAEnC,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACtE;AACJ"}}]
}