{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/an0n-ambrozio/Documents/an0n-ambrozio/database-design/DB_Project/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/an0n-ambrozio/Documents/an0n-ambrozio/database-design/DB_Project/app/api/candidates/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\nimport { Prisma } from '@prisma/client';\n\nexport const dynamic = 'force-dynamic';\n\nexport async function GET(request: Request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const status = searchParams.get('status');\n        // const search = searchParams.get('search');\n\n        const where: Prisma.CandidateWhereInput = {};\n        if (status && status !== 'all') {\n            where.status = status;\n        }\n\n        const candidates = await prisma.candidate.findMany({\n            where,\n            orderBy: { appliedDate: 'desc' },\n            include: {\n                skills: true,\n                createdBy: {\n                    select: { name: true }\n                }\n            }\n        });\n\n        return NextResponse.json(candidates);\n    } catch (error) {\n        console.error('Failed to fetch candidates:', error);\n        return NextResponse.json({ error: 'Failed to fetch candidates' }, { status: 500 });\n    }\n}\n\nexport async function POST(request: Request) {\n    try {\n        const body = await request.json();\n        const { name, email, phone, role, status, score, skills, experience, scoreBreakdown, photoUrl } = body;\n\n        // Check duplicate\n        const existing = await prisma.candidate.findUnique({\n            where: { email }\n        });\n\n        if (existing) {\n            return NextResponse.json({ error: 'Candidate with this email already exists' }, { status: 400 });\n        }\n\n        const newCandidate = await prisma.candidate.create({\n            data: {\n                name,\n                email,\n                phone,\n                role,\n                status: status || 'pending',\n                score: parseFloat(score) || 0,\n                experience: experience || [],\n                scoreBreakdown: scoreBreakdown || {},\n                photoUrl: photoUrl || '',\n                skills: {\n                    create: skills?.map((s: string) => ({ skillName: s }))\n                }\n            },\n            include: { skills: true }\n        });\n\n        return NextResponse.json(newCandidate, { status: 201 });\n    } catch (error) {\n        console.error('Failed to create candidate:', error);\n        return NextResponse.json({ error: 'Failed to create candidate' }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAGO,MAAM,UAAU;AAEhB,eAAe,IAAI,OAAgB;IACtC,IAAI;QACA,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,SAAS,aAAa,GAAG,CAAC;QAChC,6CAA6C;QAE7C,MAAM,QAAoC,CAAC;QAC3C,IAAI,UAAU,WAAW,OAAO;YAC5B,MAAM,MAAM,GAAG;QACnB;QAEA,MAAM,aAAa,MAAM,yHAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;YAC/C;YACA,SAAS;gBAAE,aAAa;YAAO;YAC/B,SAAS;gBACL,QAAQ;gBACR,WAAW;oBACP,QAAQ;wBAAE,MAAM;oBAAK;gBACzB;YACJ;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA6B,GAAG;YAAE,QAAQ;QAAI;IACpF;AACJ;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,QAAQ,EAAE,GAAG;QAElG,kBAAkB;QAClB,MAAM,WAAW,MAAM,yHAAM,CAAC,SAAS,CAAC,UAAU,CAAC;YAC/C,OAAO;gBAAE;YAAM;QACnB;QAEA,IAAI,UAAU;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA2C,GAAG;gBAAE,QAAQ;YAAI;QAClG;QAEA,MAAM,eAAe,MAAM,yHAAM,CAAC,SAAS,CAAC,MAAM,CAAC;YAC/C,MAAM;gBACF;gBACA;gBACA;gBACA;gBACA,QAAQ,UAAU;gBAClB,OAAO,WAAW,UAAU;gBAC5B,YAAY,cAAc,EAAE;gBAC5B,gBAAgB,kBAAkB,CAAC;gBACnC,UAAU,YAAY;gBACtB,QAAQ;oBACJ,QAAQ,QAAQ,IAAI,CAAC,IAAc,CAAC;4BAAE,WAAW;wBAAE,CAAC;gBACxD;YACJ;YACA,SAAS;gBAAE,QAAQ;YAAK;QAC5B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,cAAc;YAAE,QAAQ;QAAI;IACzD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA6B,GAAG;YAAE,QAAQ;QAAI;IACpF;AACJ"}}]
}